{"nodes": [{"id": "F7bP2k3D", "type": "TextInputNode", "sockets": [{"type": "output", "propName": "output", "name": "", "nodeId": "F7bP2k3D", "socketId": 0}], "properties": [{"name": "positionX", "value": -499.4000000000001}, {"name": "positionY", "value": -7.699999999999989}, {"name": "width", "value": 200.0}, {"name": "height", "value": 200.0}, {"name": "icon", "value": "./resources/images/chatIcons/defaults/TextInputNode.png"}, {"name": "label", "value": "input"}, {"name": "isSendChat", "value": true}, {"name": "inputed", "value": ""}, {"name": "output", "value": "\u308a\u3093\u3054"}], "slots": [{"propName": "output", "type": "chat", "ioType": "output"}]}, {"id": "pgU8eZZt", "type": "GPTNode", "sockets": [{"type": "input", "propName": "inputed", "name": "", "nodeId": "pgU8eZZt", "socketId": 0}, {"type": "input", "propName": "template", "name": "", "nodeId": "pgU8eZZt", "socketId": 1}, {"type": "input", "propName": "systemPrompt", "name": "", "nodeId": "pgU8eZZt", "socketId": 2}, {"type": "output", "propName": "output", "name": "", "nodeId": "pgU8eZZt", "socketId": 0}], "properties": [{"name": "positionX", "value": -227.69999999999993}, {"name": "positionY", "value": -133.10000000000005}, {"name": "width", "value": 298.0}, {"name": "height", "value": 275.0}, {"name": "icon", "value": "./resources/images/chatIcons/defaults/GPTNode.png"}, {"name": "label", "value": "Chat AI"}, {"name": "isSendChat", "value": true}, {"name": "isMemorable", "value": true}, {"name": "systemPrompt", "value": ""}, {"name": "history", "value": [{"role": "user", "content": "{input}\u306b\u3064\u3044\u3066\u6559\u3048\u3066"}, {"role": "assistant", "content": "\u7533\u3057\u8a33\u3042\u308a\u307e\u305b\u3093\u304c\u3001\u8cea\u554f\u306e\u300cinput\u300d\u3068\u3044\u3046\u7528\u8a9e\u306b\u3064\u3044\u3066\u5177\u4f53\u7684\u306a\u6587\u8108\u3084\u6307\u5b9a\u304c\u306a\u3044\u305f\u3081\u3001\u6b63\u78ba\u306a\u56de\u7b54\u306f\u3067\u304d\u307e\u305b\u3093\u3002\u8a73\u7d30\u3092\u6559\u3048\u3066\u3044\u305f\u3060\u3051\u307e\u3059\u304b\uff1f\u305d\u308c\u306b\u5fdc\u3058\u3066\u3001\u9069\u5207\u306a\u56de\u7b54\u3092\u63d0\u4f9b\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n"}, {"role": "user", "content": "\u308a\u3093\u3054\u306b\u3064\u3044\u3066\u6559\u3048\u3066"}, {"role": "assistant", "content": "\u308a\u3093\u3054\u306f\u3001\u79cb\u304b\u3089\u51ac\u306b\u304b\u3051\u3066\u4e3b\u306b\u53ce\u7a6b\u3055\u308c\u308b\u679c\u7269\u306e\u3072\u3068\u3064\u3067\u3001\u591a\u304f\u306e\u7a2e\u985e\u304c\u3042\u308a\u307e\u3059\u3002\u4e3b\u306a\u6804\u990a\u7d20\u306f\u30d3\u30bf\u30df\u30f3C\u3001\u98df\u7269\u7e4a\u7dad\u3084\u30dd\u30ea\u30d5\u30a7\u30ce\u30fc\u30eb\u306a\u3069\u304c\u542b\u307e\u308c\u3001\u5065\u5eb7\u7dad\u6301\u3084\u30b9\u30ad\u30f3\u30b1\u30a2\u306b\u826f\u3044\u3068\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n\n\u308a\u3093\u3054\u306f\u3001\u751f\u98df\u3084\u30b8\u30e5\u30fc\u30b9\u3001\u30d1\u30a4\u3084\u30af\u30c3\u30ad\u30fc\u3001\u30b5\u30e9\u30c0\u306e\u6750\u6599\u3068\u3057\u3066\u98df\u3079\u3089\u308c\u308b\u4ed6\u3001\u52a0\u71b1\u8abf\u7406\u3057\u3066\u5e02\u8ca9\u306e\u30b8\u30e3\u30e0\u3084\u30b8\u30e5\u30fc\u30b9\u3001\u30c9\u30e9\u30a4\u30d5\u30eb\u30fc\u30c4\u3084\u30a2\u30c3\u30d7\u30eb\u30b5\u30a4\u30c0\u30fc\u3001\u30ea\u30f3\u30b4\u9162\u306a\u3069\u306b\u52a0\u5de5\u3055\u308c\u308b\u3053\u3068\u3082\u3042\u308a\u307e\u3059\u3002\n\n\u307e\u305f\u3001\u308a\u3093\u3054\u306f\u65e5\u672c\u3060\u3051\u3067\u306a\u304f\u591a\u304f\u306e\u56fd\u3067\u683d\u57f9\u3055\u308c\u3066\u304a\u308a\u3001\u5730\u57df\u306b\u3088\u3063\u3066\u306f\u540d\u7523\u54c1\u3068\u3057\u3066\u89b3\u5149\u306e\u76ee\u7389\u3068\u306a\u3063\u3066\u3044\u307e\u3059\u3002\n"}]}, {"name": "inputed", "value": "\u308a\u3093\u3054\u306b\u3064\u3044\u3066\u6559\u3048\u3066"}, {"name": "output", "value": "\u308a\u3093\u3054\u306f\u3001\u79cb\u304b\u3089\u51ac\u306b\u304b\u3051\u3066\u4e3b\u306b\u53ce\u7a6b\u3055\u308c\u308b\u679c\u7269\u306e\u3072\u3068\u3064\u3067\u3001\u591a\u304f\u306e\u7a2e\u985e\u304c\u3042\u308a\u307e\u3059\u3002\u4e3b\u306a\u6804\u990a\u7d20\u306f\u30d3\u30bf\u30df\u30f3C\u3001\u98df\u7269\u7e4a\u7dad\u3084\u30dd\u30ea\u30d5\u30a7\u30ce\u30fc\u30eb\u306a\u3069\u304c\u542b\u307e\u308c\u3001\u5065\u5eb7\u7dad\u6301\u3084\u30b9\u30ad\u30f3\u30b1\u30a2\u306b\u826f\u3044\u3068\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n\n\u308a\u3093\u3054\u306f\u3001\u751f\u98df\u3084\u30b8\u30e5\u30fc\u30b9\u3001\u30d1\u30a4\u3084\u30af\u30c3\u30ad\u30fc\u3001\u30b5\u30e9\u30c0\u306e\u6750\u6599\u3068\u3057\u3066\u98df\u3079\u3089\u308c\u308b\u4ed6\u3001\u52a0\u71b1\u8abf\u7406\u3057\u3066\u5e02\u8ca9\u306e\u30b8\u30e3\u30e0\u3084\u30b8\u30e5\u30fc\u30b9\u3001\u30c9\u30e9\u30a4\u30d5\u30eb\u30fc\u30c4\u3084\u30a2\u30c3\u30d7\u30eb\u30b5\u30a4\u30c0\u30fc\u3001\u30ea\u30f3\u30b4\u9162\u306a\u3069\u306b\u52a0\u5de5\u3055\u308c\u308b\u3053\u3068\u3082\u3042\u308a\u307e\u3059\u3002\n\n\u307e\u305f\u3001\u308a\u3093\u3054\u306f\u65e5\u672c\u3060\u3051\u3067\u306a\u304f\u591a\u304f\u306e\u56fd\u3067\u683d\u57f9\u3055\u308c\u3066\u304a\u308a\u3001\u5730\u57df\u306b\u3088\u3063\u3066\u306f\u540d\u7523\u54c1\u3068\u3057\u3066\u89b3\u5149\u306e\u76ee\u7389\u3068\u306a\u3063\u3066\u3044\u307e\u3059\u3002\n"}, {"name": "template", "value": "{inputed}\u306b\u3064\u3044\u3066\u6559\u3048\u3066"}, {"name": "script", "value": "from api.apis import chatGPTReq\nfrom utils.util import Util\n\nsystemPrompt = node.get(\"systemPrompt\")\ntemp = node.get(\"template\")\ntempIn = temp.replace(\"{inputed}\",node.input)\nnode.set(\"inputed\",tempIn)\nhistory = node.get(\"history\") \nmessages = Util.genMessages(tempIn,systemPrompt,history)\ntry:\n    answer = \"\"\n    for talk in chatGPTReq(messages,stream=True):\n        answer += talk\n        node.stream(answer , isOutput=False)\n    print(answer)\nexcept Exception as e:\n    answer = str(e)\n    raise(e)\n"}], "slots": [{"propName": "template", "type": "set", "ioType": "input"}, {"propName": "systemPrompt", "type": "set", "ioType": "input"}, {"propName": "inputed", "type": "chat", "ioType": "input"}, {"propName": "output", "type": "chat", "ioType": "output"}]}, {"id": "Gekw3ivA", "type": "HubNode", "sockets": [{"type": "input", "propName": "none", "name": "", "nodeId": "Gekw3ivA", "socketId": 0}, {"type": "output", "propName": "none", "name": "", "nodeId": "Gekw3ivA", "socketId": 0}], "properties": [{"name": "positionX", "value": -788.9000000000001}, {"name": "positionY", "value": -236.1}, {"name": "width", "value": 40.0}, {"name": "height", "value": 40.0}, {"name": "icon", "value": "./resources/images/chatIcons/defaults/TextInputNode.png"}, {"name": "label", "value": ""}, {"name": "isSendChat", "value": false}], "slots": []}], "edges": [{"output": {"type": "output", "propName": "output", "name": "", "nodeId": "F7bP2k3D", "socketId": 0}, "input": {"type": "input", "propName": "inputed", "name": "", "nodeId": "pgU8eZZt", "socketId": 0}}]}